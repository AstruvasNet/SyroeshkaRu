function Alert(n,t){$("main").prepend('<div class="alert alert-'+t+' alert-dismissible" role="alert"><\/div>');var i=$('[role="alert"]');i.append('<button type="button" class="close" data-dismiss="alert" aria-label="Закрыть"><\/button>');$(".close").append('<span aria-hidden="true">&times;<\/span>');i.append('<button type="button" class="no-hidden" aria-label="Закрепить"><\/button>');$(".no-hidden").append('<span aria-hidden="true" class="fa fa-unlock-alt"><\/span>');i.prepend(n);$(".close").on("click",function(){sessionStorage.clear()});$(".no-hidden").on("click",function(n){n.preventDefault();i.hasClass("lock")?(i.removeClass("lock"),$(".no-hidden > span").removeClass("fa-lock"),$(".no-hidden > span").addClass("fa-unlock-alt"),window.setTimeout(function(){i.not(".lock").alert("close");sessionStorage.clear()},3e3),Timer(3)):($(".timer").remove(),i.addClass("lock"),$(".no-hidden > span").removeClass("fa-unlock-alt"),$(".no-hidden > span").addClass("fa-lock"))});window.setTimeout(function(){i.not(".lock").alert("close");sessionStorage.clear()},5e3);Timer(5)}function Modal(n,t,i){ModalClose();$("body").append('<div id="ajax-modal" class="modal fade" role="dialog" />');var r=$("#ajax-modal");n===null?($("#ajax-modal").append('<div class="modal-dialog modal-dialog-centered" />'),$(".modal-dialog").append('<div class="modal-content" role="document"/>'),$(".modal-content").append('<div class="modal-header" />'),$(".modal-header").append('<button type="button" class="close" data-dismiss="modal" aria-label="Закрыть" />'),$(".close").append('<span aria-hidden="true" />'),$(".close span").html("&times;"),t!==null&&($(".modal-header").append('<h4 class="modal-title" />'),$(".modal-title").text(t)),$(".modal-content").append('<div class="modal-body" />'),$(".modal-content").append('<div class="modal-footer" />'),$(".modal-body").html(i),r.modal({backdrop:"static"})):($("body").modalmanager("loading"),r.load(n,"",function(){r.append('<div class="modal-footer" />');r.modal()}))}function ModalClose(){$(".modal").remove(".modal");$(".modal-backdrop").remove()}function GroupButtons(n,t,i){switch(n){case"message":$(t).append('<input type="button" class="btn btn-success ok" value="Ok" />');break;case"confirm":$(t).prepend('<input type="hidden" value="'+i+'"/>');$(t).append('<input type="button" class="btn btn-success btn-xs" ui-role="modal-submit" value="Подтверждение" />');$(t).append('<input type="button" class="btn btn-danger btn-xs" data-dismiss="modal" value="Отмена" />')}}function Timer(n){$('[role="alert"]').prepend('<button type="button" class="timer"><\/div>');window.setInterval(function(){n>0?(n--,$(".timer").text(n)):clearInterval(n)},1e3)}function HttpPut(n,t){$.ajax({url:n,data:t,method:"PUT",error:function(n){var t=JSON.parse(n.responseText);$(".alert").remove();$("main").prepend(Alert("","danger"));$.each(t,function(n,t){$(".alert-danger").append("<div>"+t+"<\/div>")})},success:function(n){$(".alert").remove();sessionStorage.setItem("message",n);sessionStorage.setItem("type","success");location.href="/cp/root/storages"}})}function HttpDelete(n,t){ModalClose();$.ajax({url:n,data:t,method:"DELETE",error:function(n){var t=JSON.parse(n.responseText);$(".alert").remove();$("main").prepend(Alert("","danger"));$.each(t,function(n,t){$(".alert-danger").append("<div>"+t+"<\/div>")})},success:function(n){$(".alert").remove();sessionStorage.setItem("message",n);sessionStorage.setItem("type","success");location.href="/cp/root/storages"}})}function HttpGetModal(n,t){$.ajax({url:n,data:t,method:"GET",error:function(n){var t=JSON.parse(n.responseText);$(".alert").remove();$("main").prepend(Alert("","danger"));$.each(t,function(n,t){$(".alert-danger").append("<div>"+t+"<\/div>")})},success:function(n){$(".alert").remove();Modal(null,$(n).find("#Title").val(),n);$("form").on("submit",function(t){t.preventDefault();HttpDelete($(n).attr("action"),$(this).serializeArray())})}})}function HttpGet(n,t,i){$.ajax({url:n,data:t,method:"GET",error:function(n){alert(n.responseText)},beforeSend:function(){i.html("<i>Loading...<\/i>")},success:function(n){t===null?i.html($(n).html()):i.html($(n).html())}})}